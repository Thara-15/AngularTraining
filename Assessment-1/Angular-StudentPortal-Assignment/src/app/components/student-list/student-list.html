<div class="student-list-container">
  <div class="card">
    <h2 class="card-header">Student List</h2>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Age</th>
              <th>Department</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let student of students" (click)="onRowSelect(student)" class="clickable-row">
              <td>{{student.name}}</td>
              <td>{{student.email}}</td>
              <td>{{student.age}}</td>
              <td>{{student.department}}</td>
            </tr>
            <tr *ngIf="students.length === 0">
              <td colspan="4" class="text-center">No students found.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="modal" [class.show]="displayDialog">
    <div class="modal-backdrop" (click)="hideDialog()"></div>
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Student Details</h3>
          <button type="button" class="close-button" (click)="hideDialog()">&times;</button>
        </div>
        <div class="modal-body">
          <form [formGroup]="editForm">
            <div class="form-group">
              <label for="name">Name</label>
              <input type="text" class="form-control" id="name" formControlName="name" />
              <div class="error-message" *ngIf="submitted && f['name'].errors">
                <small *ngIf="f['name'].errors?.['required']">Name is required.</small>
                <small *ngIf="f['name'].errors?.['minlength']">Name must be at least 3 characters.</small>
              </div>
            </div>

            <div class="form-group">
              <label for="email">Email</label>
              <input type="email" class="form-control" id="email" formControlName="email" />
              <div class="error-message" *ngIf="submitted && f['email'].errors">
                <small *ngIf="f['email'].errors?.['required']">Email is required.</small>
                <small *ngIf="f['email'].errors?.['email']">Please enter a valid email address.</small>
              </div>
            </div>

            <div class="form-group">
              <label for="age">Age</label>
              <input type="number" class="form-control" id="age" formControlName="age" />
              <div class="error-message" *ngIf="submitted && f['age'].errors">
                <small *ngIf="f['age'].errors?.['required']">Age is required.</small>
                <small *ngIf="f['age'].errors?.['min']">Age must be at least 16.</small>
                <small *ngIf="f['age'].errors?.['max']">Age must not exceed 45.</small>
              </div>
            </div>

            <div class="form-group">
              <label for="department">Department</label>
              <select class="form-control" id="department" formControlName="department">
                <option value="" disabled>Select a department</option>
                <option *ngFor="let dept of departments" [value]="dept">{{dept}}</option>
              </select>
              <div class="error-message" *ngIf="submitted && f['department'].errors">
                <small *ngIf="f['department'].errors?.['required']">Department is required.</small>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="hideDialog()">Cancel</button>
          <button type="button" class="btn btn-primary" (click)="saveStudent()">Save</button>
        </div>
      </div>
    </div>
  </div>
</div>